var rdf2h=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t){e.exports=$rdf},function(e,t,r){"use strict";var n=r(0);e.exports={schema:function(e){return n.sym("http://schema.org/"+e)},rdf:function(e){return n.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#"+e)},rdfs:function(e){return n.sym("http://www.w3.org/2000/01/rdf-schema#"+e)},foaf:function(e){return n.sym("http://xmlns.com/foaf/0.1/"+e)},rdf2h:function(e){return n.sym("http://rdf2h.github.io/2015/rdf2h#"+e)}}},function(e,t,r){var n,o,s,i;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */i=function(e){var t=Object.prototype.toString,r=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(e){return"function"==typeof e}function o(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(e,t){return null!=e&&"object"==typeof e&&t in e}var i=RegExp.prototype.test,a=/\S/;function u(e){return!function(e,t){return i.call(e,t)}(a,e)}var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},p=/\s*/,c=/\s+/,f=/\s*=/,l=/\s*\}/,d=/#|\^|\/|>|\{|&|=|!/;function g(e){this.string=e,this.tail=e,this.pos=0}function v(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function w(){this.cache={}}g.prototype.eos=function(){return""===this.tail},g.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},g.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},v.prototype.push=function(e){return new v(e,this)},v.prototype.lookup=function(e){var t,r=this.cache;if(r.hasOwnProperty(e))t=r[e];else{for(var o,i,a=this,u=!1;a;){if(e.indexOf(".")>0)for(t=a.view,o=e.split("."),i=0;null!=t&&i<o.length;)i===o.length-1&&(u=s(t,o[i])),t=t[o[i++]];else t=a.view[e],u=s(a.view,e);if(u)break;a=a.parent}r[e]=t}return n(t)&&(t=t.call(this.view)),t},w.prototype.clearCache=function(){this.cache={}},w.prototype.parse=function(t,n){var s=this.cache,i=s[t];return null==i&&(i=s[t]=function(t,n){if(!t)return[];var s,i,a,h=[],v=[],w=[],y=!1,m=!1;function x(){if(y&&!m)for(;w.length;)delete v[w.pop()];else w=[];y=!1,m=!1}function b(e){if("string"==typeof e&&(e=e.split(c,2)),!r(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(o(e[0])+"\\s*"),i=new RegExp("\\s*"+o(e[1])),a=new RegExp("\\s*"+o("}"+e[1]))}b(n||e.tags);for(var k,C,R,E,N,T,j=new g(t);!j.eos();){if(k=j.pos,R=j.scanUntil(s))for(var M=0,O=R.length;M<O;++M)u(E=R.charAt(M))?w.push(v.length):m=!0,v.push(["text",E,k,k+1]),k+=1,"\n"===E&&x();if(!j.scan(s))break;if(y=!0,C=j.scan(d)||"name",j.scan(p),"="===C?(R=j.scanUntil(f),j.scan(f),j.scanUntil(i)):"{"===C?(R=j.scanUntil(a),j.scan(l),j.scanUntil(i),C="&"):R=j.scanUntil(i),!j.scan(i))throw new Error("Unclosed tag at "+j.pos);if(N=[C,R,k,j.pos],v.push(N),"#"===C||"^"===C)h.push(N);else if("/"===C){if(!(T=h.pop()))throw new Error('Unopened section "'+R+'" at '+k);if(T[1]!==R)throw new Error('Unclosed section "'+T[1]+'" at '+k)}else"name"===C||"{"===C||"&"===C?m=!0:"="===C&&b(R)}if(T=h.pop())throw new Error('Unclosed section "'+T[1]+'" at '+j.pos);return function(e){for(var t,r=[],n=r,o=[],s=0,i=e.length;s<i;++s)switch((t=e[s])[0]){case"#":case"^":n.push(t),o.push(t),n=t[4]=[];break;case"/":o.pop()[5]=t[2],n=o.length>0?o[o.length-1][4]:r;break;default:n.push(t)}return r}(function(e){for(var t,r,n=[],o=0,s=e.length;o<s;++o)(t=e[o])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}(v))}(t,n)),i},w.prototype.render=function(e,t,r){var n=this.parse(e),o=t instanceof v?t:new v(t);return this.renderTokens(n,o,r,e)},w.prototype.renderTokens=function(e,t,r,n){for(var o,s,i,a="",u=0,h=e.length;u<h;++u)i=void 0,"#"===(s=(o=e[u])[0])?i=this.renderSection(o,t,r,n):"^"===s?i=this.renderInverted(o,t,r,n):">"===s?i=this.renderPartial(o,t,r,n):"&"===s?i=this.unescapedValue(o,t):"name"===s?i=this.escapedValue(o,t):"text"===s&&(i=this.rawValue(o)),void 0!==i&&(a+=i);return a},w.prototype.renderSection=function(e,t,o,s){var i=this,a="",u=t.lookup(e[1]);if(u){if(r(u))for(var h=0,p=u.length;h<p;++h)a+=this.renderTokens(e[4],t.push(u[h]),o,s);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)a+=this.renderTokens(e[4],t.push(u),o,s);else if(n(u)){if("string"!=typeof s)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(t.view,s.slice(e[3],e[5]),function(e){return i.render(e,t,o)}))&&(a+=u)}else a+=this.renderTokens(e[4],t,o,s);return a}},w.prototype.renderInverted=function(e,t,n,o){var s=t.lookup(e[1]);if(!s||r(s)&&0===s.length)return this.renderTokens(e[4],t,n,o)},w.prototype.renderPartial=function(e,t,r){if(r){var o=n(r)?r(e[1]):r[e[1]];return null!=o?this.renderTokens(this.parse(o),t,r,o):void 0}},w.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},w.prototype.escapedValue=function(t,r){var n=r.lookup(t[1]);if(null!=n)return e.escape(n)},w.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var y=new w;return e.clearCache=function(){return y.clearCache()},e.parse=function(e,t){return y.parse(e,t)},e.render=function(e,t,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(r(o=e)?"array":typeof o)+'" was given as the first argument for mustache#render(template, view, partials)');var o;return y.render(e,t,n)},e.to_html=function(t,r,o,s){var i=e.render(t,r,o);if(!n(s))return i;s(i)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return h[e]})},e.Scanner=g,e.Context=v,e.Writer=w,e},"object"==typeof t&&t&&"string"!=typeof t.nodeName?i(t):(o=[t],void 0===(s="function"==typeof(n=i)?n.apply(t,o):n)||(e.exports=s))},function(e,t){e.exports=fetch},function(e,t,r){var n=r(0),o=r(3);let s=(e=>e||window.Headers)(o.Headers);function i(){return new i.Impl(...arguments)}i.Impl=class{constructor(e,t,r){this._graph=t,Array.isArray(e)?this.nodes=e:this.nodes=[e],this.sources=r}get graph(){if(!this._graph)throw Error("Operation not possible as no Graph is available, try fetching first");return this._graph}get node(){if(1!==this.nodes.length)throw Error("Operation not possible as this GraphNode is underdetermined");return this.nodes[0]}get termType(){return this.node.termType}get value(){return this.node.value}fetch(){if("NamedNode"!==this.termType||this.sources&&this.sources.indexOf(this.value.split("#")[0])>-1)return Promise.resolve(this);var e=this.value.split("#")[0];return i.rdfFetch(e).then(e=>e.graph()).then(t=>i(this.node,t,[e]))}each(e){var t=this.nodes.map(t=>e(i([t],this.graph,this.sources)));return Promise.all(t)}fetchEach(e){var t=this.nodes.map(t=>i([t],this.graph,this.sources).fetch().then(e));return Promise.all(t)}split(){return this.nodes.map(e=>i([e],this.graph,this.sources))}out(e){return i(this.graph.each(this.node,e),this.graph,this.sources)}in(e){return i(this.graph.statementsMatching(void 0,e,this.node).map(e=>e.subject),this.graph,this.sources)}},i.rdfFetch=function(e,t,r){var i=this;return function(e,t={}){return t.headers||(t.headers=new s),t.headers.get("Accept")||t.headers.set("Accept","text/turtle;q=1, application/n-triples;q=.9, application/rdf+xml;q=.8, application/ld+json;q=.7, */*;q=.1"),o(e,t).then(t=>t.ok?(t.graph=(()=>new Promise((r,o)=>{let s=n.graph(),i=t.headers.get("Content-type").split(";")[0];return t.text().then(t=>{n.parse(t,s,e,i,(e,t)=>{e?o(e):r(t)})})})),t):t)}(e,t).then(function(n){return n.status<300?n:r&&401===n.status?(console.log("Got 401 response, attempting to login"),r().then(function(){return i.rdfFetch(e,t)})):n})},e.exports=i},function(e,t,r){"use strict";var n=r(0),o=r(4),s=r(2),i=r(1);function a(e,t){this.rendererGraph=e,this.tbox=t||e,this.env={}}new Array,function(){i.rdf2h;var e=s.Context.prototype.lookup;s.Context.prototype.lookup=function(t){if(this.view instanceof a.Renderee){var r=function(e){var t=function(e){var t=[],r=!1,n=!1,o="";function s(){o.length>0&&(t.push(o),o="")}for(var i=0;i<e.length;i++){var a=e[i];n&&("-"!==a&&(s(),r=!0),o+="<",n=!1),"<"!==a?r&&">"==a?(o+=a,s(),r=!1):r||"/"!=a?o+=a:s():n=!0}return s(),t}(e);return function e(t,r){var o,s="."===(o=r[0])?t:o.endsWith("<-")?t.in(a.resolveCurie(o.substring(0,o.length-2))):o.startsWith("^")?t.in(a.resolveCurie(o.substring(1))):t.out(a.resolveCurie(o));if(1===r.length){var i=s.nodes;if(0===i.length){if(t.nodes[0].language&&a.resolveCurie(r[0]).equals(n.sym("http://purl.org/dc/terms/language")))return[n.literal(t.nodes[0].language)];if(t.nodes[0].datatype&&a.resolveCurie(r[0]).equals(a.resolveCurie("rdf:type")))return[t.nodes[0].datatype]}return i}return e(s,r.slice(1))}(i,t)},s=this.view.rdf2h,i=this.view.graphNode,u=i.graph,h=this.view.context;if(t.startsWith("@prefix ")){var p=(d=t.split(" "))[1],c=d[2],f=p.substring(0,p.length-1),l=c.substring(1,c.length-1);return a.prefixMap[f]=l,""}if(t.startsWith(":render ")){var d,g,v=(d=t.split(" "))[1];(g=d[2])&&(g=a.resolveCurie(g)),g||(g=h);var w=r(v);return w.length>1&&console.warn("Argument of render evaluates to more than one node!"),w.length>0?s.render(u,w[0],g):""}if(t.startsWith(":continue"))return(g=(d=t.split(" "))[1])&&(g=a.resolveCurie(g)),g||(g=h),i.nodes.length>1&&console.warn(":continue invoked in context with more than one node, this shouldn't be possible!"),s.render(u,i.nodes[0],g);if(t.startsWith("+"))return r(t=t.substring(1)).length>0;var y=r(t);return 1===y.length?new a.Renderee(s,o(y[0],u),h):y.map(function(e){return new a.Renderee(s,o(e,u),h)})}return e.call(this,t)}}(),a.Renderee=function(e,t,r){if(!t.nodes)throw new Error("second argument must be a GraphNode");if(1!==t.nodes.length)throw new Error("Renderee must be a single node");this.rdf2h=e,this.graphNode=t,this.context=r},a.Renderee.prototype.toString=function(){return this.graphNode.value?this.graphNode.value:this.graphNode.toString()},a.prototype.getRenderer=function(e){var t,r=this,a=(i.rdf2h,this.tbox),u=(t=e.graphNode,"Literal"===t.node.termType?[t.node.datatype]:t.out(i.rdf("type")).nodes.sort(function(e,t){return e.equals(t)?0:e.equals(i.rdfs("Resource"))?1:t.equals(i.rdfs("Resource"))?-1:0===a.match(e,i.rdfs("subClassOf"),t).length?0===a.match(t,i.rdfs("subClassOf"),e).length?e.value.localeCompare(t.value):1:-1}).concat([i.rdfs("Resource")])).map(function(e){return o(e,r.rendererGraph)}),h=function(e,t){return[!1].concat(e).reduce(function(e,r){return e||r.in(i.rdf2h("type")).split().find(function(e){return t.equals(e.out(i.rdf2h("context")).node)})})}(u,e.context);if(!h)throw Error("No renderer found with context: <"+e.context.value+"> for any of the types "+u.map(function(e){return"<"+e.value+">"}).join()+". The resource <"+e.graphNode.value+"> could thus not be rendered.");var p=h.out(i.rdf2h("mustache"));if(p.nodes.length>0)return function(e){return function(t){return s.render(e,t)}}(p.value);var c=h.out(i.rdf2h("javaScript"));return function(e){try{var t="",r=new Function("n","context","$rdf","render","print","GraphNode","env",c.value)(e.graphNode,e.context,n,function(t,r){return e.rdf2h.render(t.graph,t.node,r||e.context)},function(e){t+=e},o,e.rdf2h.env);return r?t+r:t}catch(e){e.message=e.message+" in "+c.value;var s=e.stack.split("\n"),i=s.findIndex(function(e){return e.indexOf("RDF2h.render")>0});throw e.stack=s.splice(0,i-1).join("\n"),e}}},a.prototype.render=function(e,t,r){t.termType||(t=n.sym(t)),r||(r=i.rdf2h("Default"));var s=new a.Renderee(this,o(t,e),r);return this.getRenderer(s)(s)},a.prefixMap={},a.prefixMap.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a.prefixMap.rdfs="http://www.w3.org/2000/01/rdf-schema#",a.prefixMap.r2h="http://rdf2h.github.io/2015/rdf2h#",a.prefixMap.schema="http://schema.org/",a.prefixMap.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a.prefixMap.dct="http://purl.org/dc/terms/",a.resolveCurie=function(e){if(e.startsWith("<")&&e.endsWith(">"))return n.sym(e.substring(1,e.length-1));var t=e.split(":"),r=t[0],o=t[1];return a.prefixMap[r]?n.sym(a.prefixMap[r]+o):n.sym(e)},"undefined"!=typeof window&&(window.RDF2h=a),e.exports=a}]);
//# sourceMappingURL=rdf2h.js.map