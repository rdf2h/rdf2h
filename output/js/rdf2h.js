!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t){e.exports=$rdf},function(e,t,r){"use strict";var n=r(0);e.exports={schema:function(e){return n.sym("http://schema.org/"+e)},rdf:function(e){return n.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#"+e)},rdfs:function(e){return n.sym("http://www.w3.org/2000/01/rdf-schema#"+e)},foaf:function(e){return n.sym("http://xmlns.com/foaf/0.1/"+e)},rdf2h:function(e){return n.sym("http://rdf2h.github.io/2015/rdf2h#"+e)}}},function(e,t,r){"use strict";var n,a,i,s,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
s=function(e){var t=Object.prototype.toString,r=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(e){return"function"==typeof e}function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"===(void 0===e?"undefined":o(e))&&t in e}var s=RegExp.prototype.test;var l=/\S/;function u(e){return!function(e,t){return s.call(e,t)}(l,e)}var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var p=/\s*/,c=/\s+/,f=/\s*=/,d=/\s*\}/,g=/#|\^|\/|>|\{|&|=|!/;function v(e){this.string=e,this.tail=e,this.pos=0}function w(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function m(){this.cache={}}v.prototype.eos=function(){return""===this.tail},v.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},v.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},w.prototype.push=function(e){return new w(e,this)},w.prototype.lookup=function(e){var t,r=this.cache;if(r.hasOwnProperty(e))t=r[e];else{for(var a,s,o=this,l=!1;o;){if(e.indexOf(".")>0)for(t=o.view,a=e.split("."),s=0;null!=t&&s<a.length;)s===a.length-1&&(l=i(t,a[s])),t=t[a[s++]];else t=o.view[e],l=i(o.view,e);if(l)break;o=o.parent}r[e]=t}return n(t)&&(t=t.call(this.view)),t},m.prototype.clearCache=function(){this.cache={}},m.prototype.parse=function(t,n){var i=this.cache,s=i[t];return null==s&&(s=i[t]=function(t,n){if(!t)return[];var i,s,o,l=[],h=[],w=[],m=!1,b=!1;function y(){if(m&&!b)for(;w.length;)delete h[w.pop()];else w=[];m=!1,b=!1}function R(e){if("string"==typeof e&&(e=e.split(c,2)),!r(e)||2!==e.length)throw new Error("Invalid tags: "+e);i=new RegExp(a(e[0])+"\\s*"),s=new RegExp("\\s*"+a(e[1])),o=new RegExp("\\s*"+a("}"+e[1]))}R(n||e.tags);for(var x,N,U,I,T,M,O=new v(t);!O.eos();){if(x=O.pos,U=O.scanUntil(i))for(var E=0,k=U.length;E<k;++E)u(I=U.charAt(E))?w.push(h.length):b=!0,h.push(["text",I,x,x+1]),x+=1,"\n"===I&&y();if(!O.scan(i))break;if(m=!0,N=O.scan(g)||"name",O.scan(p),"="===N?(U=O.scanUntil(f),O.scan(f),O.scanUntil(s)):"{"===N?(U=O.scanUntil(o),O.scan(d),O.scanUntil(s),N="&"):U=O.scanUntil(s),!O.scan(s))throw new Error("Unclosed tag at "+O.pos);if(T=[N,U,x,O.pos],h.push(T),"#"===N||"^"===N)l.push(T);else if("/"===N){if(!(M=l.pop()))throw new Error('Unopened section "'+U+'" at '+x);if(M[1]!==U)throw new Error('Unclosed section "'+M[1]+'" at '+x)}else"name"===N||"{"===N||"&"===N?b=!0:"="===N&&R(U)}if(M=l.pop())throw new Error('Unclosed section "'+M[1]+'" at '+O.pos);return function(e){for(var t,r=[],n=r,a=[],i=0,s=e.length;i<s;++i)switch((t=e[i])[0]){case"#":case"^":n.push(t),a.push(t),n=t[4]=[];break;case"/":a.pop()[5]=t[2],n=a.length>0?a[a.length-1][4]:r;break;default:n.push(t)}return r}(function(e){for(var t,r,n=[],a=0,i=e.length;a<i;++a)(t=e[a])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}(h))}(t,n)),s},m.prototype.render=function(e,t,r){var n=this.parse(e),a=t instanceof w?t:new w(t);return this.renderTokens(n,a,r,e)},m.prototype.renderTokens=function(e,t,r,n){for(var a,i,s,o="",l=0,u=e.length;l<u;++l)s=void 0,"#"===(i=(a=e[l])[0])?s=this.renderSection(a,t,r,n):"^"===i?s=this.renderInverted(a,t,r,n):">"===i?s=this.renderPartial(a,t,r,n):"&"===i?s=this.unescapedValue(a,t):"name"===i?s=this.escapedValue(a,t):"text"===i&&(s=this.rawValue(a)),void 0!==s&&(o+=s);return o},m.prototype.renderSection=function(e,t,a,i){var s=this,l="",u=t.lookup(e[1]);if(u){if(r(u))for(var h=0,p=u.length;h<p;++h)l+=this.renderTokens(e[4],t.push(u[h]),a,i);else if("object"===(void 0===u?"undefined":o(u))||"string"==typeof u||"number"==typeof u)l+=this.renderTokens(e[4],t.push(u),a,i);else if(n(u)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(t.view,i.slice(e[3],e[5]),function(e){return s.render(e,t,a)}))&&(l+=u)}else l+=this.renderTokens(e[4],t,a,i);return l}},m.prototype.renderInverted=function(e,t,n,a){var i=t.lookup(e[1]);if(!i||r(i)&&0===i.length)return this.renderTokens(e[4],t,n,a)},m.prototype.renderPartial=function(e,t,r){if(r){var a=n(r)?r(e[1]):r[e[1]];return null!=a?this.renderTokens(this.parse(a),t,r,a):void 0}},m.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},m.prototype.escapedValue=function(t,r){var n=r.lookup(t[1]);if(null!=n)return e.escape(n)},m.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var b=new m;return e.clearCache=function(){return b.clearCache()},e.parse=function(e,t){return b.parse(e,t)},e.render=function(e,t,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(r(a=e)?"array":void 0===a?"undefined":o(a))+'" was given as the first argument for mustache#render(template, view, partials)');var a;return b.render(e,t,n)},e.to_html=function(t,r,a,i){var s=e.render(t,r,a);if(!n(i))return s;i(s)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return h[e]})},e.Scanner=v,e.Context=w,e.Writer=m,e},"object"===o(t)&&t&&"string"!=typeof t.nodeName?s(t):(a=[t],void 0===(i="function"==typeof(n=s)?n.apply(t,a):n)||(e.exports=i))},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=r(0),i=a.BlankNode,s=a.Literal,o=a.DataFactory,l=a.NamedNode,u=a.uri,h=a.Util;if(void 0===p)var p={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var c=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=r||{},this.kb=t,this.target=r.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+(new Date).getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}return n(e,[{key:"addTriple",value:function(e,t,r,n){var a,i,s,l;a=void 0===t?o.namedNode(this.options.base):this.toRDFNodeObject(t),s=this.toRDFNodeObject(r),i=this.toRDFNodeObject(n),l=o.namedNode(this.options.base),this.kb.add(a,s,i,l)}},{key:"ancestorPath",value:function(e){for(var t="";e&&e.nodeType!==p.DOCUMENT_NODE;)t="/"+e.localName+t,e=e.parentNode;return t}},{key:"copyMappings",value:function(e){var t={};for(var r in e)t[r]=e[r];return t}},{key:"copyProperties",value:function(){}},{key:"deriveDateTimeType",value:function(t){for(var r=0;r<e.dateTimeTypes.length;r++){var n=e.dateTimeTypes[r].pattern.exec(t);if(n&&n[0].length===t.length)return e.dateTimeTypes[r].type}return null}},{key:"init",value:function(){}},{key:"newBlankNode",value:function(){return this.blankCounter++,"_:"+this.blankCounter}},{key:"newSubjectOrigin",value:function(e,t){}},{key:"parseCURIE",value:function(t,r,n){var a,i=t.indexOf(":");if(i>=0){var s=t.substring(0,i);if(""===s)return(a=r[""])?a+t.substring(i+1):null;if("_"===s)return"_:"+t.substring(i+1);if(e.NCNAME.test(s)&&(a=r[s]))return a+t.substring(i+1)}return null}},{key:"parseCURIEOrURI",value:function(e,t,r){var n=this.parseCURIE(e,t,r);return n||this.resolveAndNormalize(r,e)}},{key:"parsePredicate",value:function(e,t,r,n,a,i){if(""===e)return null;var s=this.parseTermOrCURIEOrAbsURI(e,t,i?null:r,n,a);return s&&0===s.indexOf("_:")?null:s}},{key:"parsePrefixMappings",value:function(e,t){for(var r=this.tokenize(e),n=null,a=0;a<r.length;a++)":"===r[a][r[a].length-1]?n=r[a].substring(0,r[a].length-1):n&&(t[n]=this.options.base?u.join(r[a],this.options.base):r[a],n=null)}},{key:"parseSafeCURIEOrCURIEOrURI",value:function(e,t,r){return"["===(e=this.trim(e)).charAt(0)&&"]"===e.charAt(e.length-1)?0===(e=(e=e.substring(1,e.length-1)).trim(e)).length?null:"_:"===e?this.theOne:this.parseCURIE(e,t,r):this.parseCURIEOrURI(e,t,r)}},{key:"parseTermOrCURIEOrAbsURI",value:function(e,t,r,n,a){e=this.trim(e);var i=this.parseCURIE(e,n,a);if(i)return i;if(r){if(t&&!this.absURIRE.exec(e))return t+e;var s=r[e];if(s)return s;if(s=r[e.toLowerCase()])return s}return this.absURIRE.exec(e)?this.resolveAndNormalize(a,e):null}},{key:"parseTermOrCURIEOrURI",value:function(e,t,r,n,a){e=this.trim(e);var i=this.parseCURIE(e,n,a);if(i)return i;var s=r[e];return s||((s=r[e.toLowerCase()])?s:t&&!this.absURIRE.exec(e)?t+e:this.resolveAndNormalize(a,e))}},{key:"parseURI",value:function(e){return e}},{key:"process",value:function(t,r){var n;t.nodeType===p.DOCUMENT_NODE?(n=t.baseURI,t=t.documentElement,this.setContext(t)):t.parentNode.nodeType===p.DOCUMENT_NODE&&this.setContext(t);var a=[],i=function(e){if(!e&&r&&r.baseURI)return r.baseURI;var t=e.indexOf("#");return t>=0&&(e=e.substring(0,t)),r&&r.baseURIMap&&(e=r.baseURIMap(e)),e};for(a.push({current:t,context:this.push(null,i(t.baseURI))});a.length>0;){var s=a.shift();if(s.parent){if(s.context.parent&&s.context.parent.listMapping===s.listMapping)continue;for(var o in s.listMapping){var l=s.listMapping[o];if(0!==l.length){for(var h=[],c=0;c<l.length;c++)h.push(this.newBlankNode());for(var f=0;f<h.length;f++)this.addTriple(s.parent,h[f],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",l[f]),this.addTriple(s.parent,h[f],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:e.objectURI,value:f+1<h.length?h[f+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(s.parent,s.subject,o,{type:e.objectURI,value:h[0]})}else this.addTriple(s.parent,s.subject,o,{type:e.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"})}}else{var d=s.current,g=s.context,v=!1,w=null,m=null,b=null,y=g.prefixes,R=!1,x=[],N=g.listMapping,U=!g.parent,I=g.language,T=g.vocabulary;n=this.parseURI(i(d.baseURI)),d.item=null;var M=d.getAttributeNode("vocab");if(M){var O=this.trim(M.value);if(O.length>0){T=O;var E=n.spec;this.addTriple(d,E,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:e.objectURI,value:T})}else T=this.vocabulary}for(var k=0;k<d.attributes.length;k++){var C=d.attributes[k];if("x"===C.nodeName.charAt(0)&&0===C.nodeName.indexOf("xmlns:")){R||(y=this.copyMappings(y),R=!0);var L=C.nodeName.substring(6),j=this.trim(C.value);y[L]=this.options.base?u.join(j,this.options.base):j}}var A=d.getAttributeNode("prefix");A&&(R||(y=this.copyMappings(y),R=!0),this.parsePrefixMappings(A.value,y));for(var D=null,_=0;!D&&_<this.langAttributes.length;_++)D=d.getAttributeNodeNS(this.langAttributes[_].namespaceURI,this.langAttributes[_].localName);if(D){var H=this.trim(D.value);I=H.length>0?H:null}var S,P,X=d.getAttributeNode("rel"),F=d.getAttributeNode("rev"),z=d.getAttributeNode("typeof"),W=d.getAttributeNode("property"),q=d.getAttributeNode("datatype"),G=this.inHTMLMode?d.getAttributeNode("datetime"):null,B=d.getAttributeNode("content"),V=d.getAttributeNode("about"),Y=d.getAttributeNode("src"),$=d.getAttributeNode("resource"),Z=d.getAttributeNode("href"),J=d.getAttributeNode("inlist"),K=[];if(X){P=this.tokenize(X.value);for(var Q=0;Q<P.length;Q++)(S=this.parsePredicate(P[Q],T,g.terms,y,n,this.inHTMLMode&&null!==W))&&K.push(S)}var ee=[];if(F){P=this.tokenize(F.value);for(var te=0;te<P.length;te++)(S=this.parsePredicate(P[te],T,g.terms,y,n,this.inHTMLMode&&W))&&ee.push(S)}if(this.inHTMLMode&&(X||F)&&W&&(0===K.length&&(X=null),0===ee.length&&(F=null)),X||F?(V&&(w=this.parseSafeCURIEOrCURIEOrURI(V.value,y,n)),z&&(b=w),w||(d.parentNode.nodeType===p.DOCUMENT_NODE?w=i(d.baseURI):g.parentObject&&(w=i(d.parentNode.baseURI)===g.parentObject?i(d.baseURI):g.parentObject)),$&&(m=this.parseSafeCURIEOrCURIEOrURI($.value,y,n)),m||(Z?m=this.resolveAndNormalize(n,encodeURI(Z.value)):Y?m=this.resolveAndNormalize(n,encodeURI(Y.value)):!z||V||this.inXHTMLMode&&("head"===d.localName||"body"===d.localName)||(m=this.newBlankNode())),!z||V||!this.inXHTMLMode||"head"!==d.localName&&"body"!==d.localName?z&&!V&&(b=m):b=w):!W||B||q?(V&&(w=this.parseSafeCURIEOrCURIEOrURI(V.value,y,n)),!w&&$&&(w=this.parseSafeCURIEOrCURIEOrURI($.value,y,n)),!w&&Z&&(w=this.resolveAndNormalize(n,encodeURI(Z.value))),!w&&Y&&(w=this.resolveAndNormalize(n,encodeURI(Y.value))),w||(d.parentNode.nodeType===p.DOCUMENT_NODE?w=i(d.baseURI):!this.inXHTMLMode&&!this.inHTMLMode||"head"!==d.localName&&"body"!==d.localName?z?w=this.newBlankNode():g.parentObject&&(w=i(d.parentNode.baseURI)===g.parentObject?i(d.baseURI):g.parentObject,W||(v=!0)):w=i(d.parentNode.baseURI)===g.parentObject?i(d.baseURI):g.parentObject),z&&(b=w)):(V&&(w=this.parseSafeCURIEOrCURIEOrURI(V.value,y,n),z&&(b=w)),w||d.parentNode.nodeType!==p.DOCUMENT_NODE?!w&&g.parentObject&&(w=i(d.parentNode.baseURI)===g.parentObject?i(d.baseURI):g.parentObject):(w=i(d.baseURI),z&&(b=w)),z&&!b&&($&&(b=this.parseSafeCURIEOrCURIEOrURI($.value,y,n)),!b&&Z&&(b=this.resolveAndNormalize(n,encodeURI(Z.value))),!b&&Y&&(b=this.resolveAndNormalize(n,encodeURI(Y.value))),b||!this.inXHTMLMode&&!this.inHTMLMode||"head"!==d.localName&&"body"!==d.localName||(b=w),b||(b=this.newBlankNode()),m=b)),w&&(V||$||b)){var re=w;z&&!V&&!$&&m&&(re=m),this.newSubjectOrigin(d,re)}if(b){P=this.tokenize(z.value);for(var ne=0;ne<P.length;ne++){var ae=this.parseTermOrCURIEOrAbsURI(P[ne],T,g.terms,y,n);ae&&this.addTriple(d,b,e.typeURI,{type:e.objectURI,value:ae})}}if(w&&w!==g.parentObject&&(N={},U=!0),m){if(X&&J)for(var ie=0;ie<K.length;ie++){var se=N[K[ie]];se||(se=[],N[K[ie]]=se),se.push({type:e.objectURI,value:m})}else if(X)for(var oe=0;oe<K.length;oe++)this.addTriple(d,w,K[oe],{type:e.objectURI,value:m});if(F)for(var le=0;le<ee.length;le++)this.addTriple(d,m,ee[le],{type:e.objectURI,value:w})}else{if(w&&!m&&(X||F)&&(m=this.newBlankNode()),X&&J)for(var ue=0;ue<K.length;ue++){var he=N[K[ue]];he||(he=[],N[S]=he),x.push({predicate:K[ue],list:he})}else if(X)for(var pe=0;pe<K.length;pe++)x.push({predicate:K[pe],forward:!0});if(F)for(var ce=0;ce<ee.length;ce++)x.push({predicate:ee[ce],forward:!1})}if(W){var fe=null,de=null;q?(fe=""===q.value?e.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(q.value,T,g.terms,y,n),de=G&&!B?G.value:fe===e.XMLLiteralURI||fe===e.HTMLLiteralURI?null:B?B.value:d.textContent):B?(fe=e.PlainLiteralURI,de=B.value):G?(de=G.value,(fe=e.deriveDateTimeType(de))||(fe=e.PlainLiteralURI)):X||F||($&&(de=this.parseSafeCURIEOrCURIEOrURI($.value,y,n)),!de&&Z?de=this.resolveAndNormalize(n,encodeURI(Z.value)):!de&&Y&&(de=this.resolveAndNormalize(n,encodeURI(Y.value))),de&&(fe=e.objectURI)),fe||(z&&!V?(fe=e.objectURI,de=b):(de=d.textContent,this.inHTMLMode&&"time"===d.localName&&(fe=e.deriveDateTimeType(de)),fe||(fe=e.PlainLiteralURI))),P=this.tokenize(W.value);for(var ge=0;ge<P.length;ge++){var ve=this.parsePredicate(P[ge],T,g.terms,y,n);if(ve)if(J){var we=N[ve];we||(we=[],N[ve]=we),we.push(fe===e.XMLLiteralURI||fe===e.HTMLLiteralURI?{type:fe,value:d.childNodes}:{type:fe||e.PlainLiteralURI,value:de,language:I})}else fe===e.XMLLiteralURI||fe===e.HTMLLiteralURI?this.addTriple(d,w,ve,{type:fe,value:d.childNodes}):this.addTriple(d,w,ve,{type:fe||e.PlainLiteralURI,value:de,language:I})}}if(w&&!v)for(var me=0;me<g.incomplete.length;me++)g.incomplete[me].list?g.incomplete[me].list.push({type:e.objectURI,value:w}):g.incomplete[me].forward?this.addTriple(d,g.subject,g.incomplete[me].predicate,{type:e.objectURI,value:w}):this.addTriple(d,w,g.incomplete[me].predicate,{type:e.objectURI,value:g.subject});var be=null,ye=w;v?((be=this.push(g,g.subject)).parentObject=i(d.parentNode.baseURI)===g.parentObject?i(d.baseURI):g.parentObject,be.incomplete=g.incomplete,be.language=I,be.prefixes=y,be.vocabulary=T):((be=this.push(g,w)).parentObject=m||(w||g.subject),be.prefixes=y,be.incomplete=x,m&&(ye=m,N={},U=!0),be.listMapping=N,be.language=I,be.vocabulary=T),U&&a.unshift({parent:d,context:g,subject:ye,listMapping:N});for(var Re=d.lastChild;Re;Re=Re.previousSibling)Re.nodeType===p.ELEMENT_NODE&&a.unshift({current:Re,context:be})}}this.inHTMLMode&&this.copyProperties();for(var xe=0;xe<this.finishedHandlers.length;xe++)this.finishedHandlers[xe](t)}},{key:"push",value:function(e,t){return{parent:e,subject:t||(e?e.subject:null),parentObject:null,incomplete:[],listMapping:e?e.listMapping:{},language:e?e.language:this.language,prefixes:e?e.prefixes:this.target.graph.prefixes,terms:e?e.terms:this.target.graph.terms,vocabulary:e?e.vocabulary:this.vocabulary}}},{key:"resolveAndNormalize",value:function(e,t){return u.join(t,e)}},{key:"setContext",value:function(e){"html"===e.localName&&"XHTML+RDFa 1.1"===e.getAttribute("version")?this.setXHTMLContext():"html"===e.localName||"http://www.w3.org/1999/xhtml"===e.namespaceURI?"undefined"!=typeof document&&document.doctype?"-//W3C//DTD XHTML+RDFa 1.0//EN"===document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"===document.doctype.systemId?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):"-//W3C//DTD XHTML+RDFa 1.1//EN"===document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"===document.doctype.systemId?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}},{key:"setHTMLContext",value:function(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}},{key:"setInitialContext",value:function(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}},{key:"setXHTMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}},{key:"setXMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}},{key:"tokenize",value:function(e){return this.trim(e).split(/\s+/)}},{key:"toRDFNodeObject",value:function(t){if(void 0!==t){if("string"==typeof t)return"_:"===t.substring(0,2)?(void 0===this.blankNodes[t.substring(2)]&&(this.blankNodes[t.substring(2)]=new i(t.substring(2))),this.blankNodes[t.substring(2)]):o.namedNode(t);switch(t.type){case e.objectURI:return"_:"===t.value.substring(0,2)?(void 0===this.blankNodes[t.value.substring(2)]&&(this.blankNodes[t.value.substring(2)]=new i(t.value.substring(2))),this.blankNodes[t.value.substring(2)]):o.namedNode(t.value);case e.PlainLiteralURI:return new s(t.value,t.language||"");case e.XMLLiteralURI:case e.HTMLLiteralURI:var r="";return Object.keys(t.value).forEach(function(e){r+=h.domToString(t.value[e],this.htmlOptions)}),new s(r,"",new l(t.type));default:return new s(t.value,"",new l(t.type))}}}},{key:"trim",value:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}],[{key:"parseRDFaDOM",value:function(t,r,n){new e(r,{base:n}).process(t)}}]),e}();c.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral",c.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML",c.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",c.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object",c.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",c.nameChar="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]",c.nameStartChar="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]",c.NCNAME=new RegExp("^"+c.nameStartChar+c.nameChar+"*$"),c.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}],e.exports=c},function(e,t){e.exports=fetch},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=r(0),i=r(4),s=r(3),o=i.Headers||window.Headers;function l(){return new(Function.prototype.bind.apply(l.Impl,[null].concat(Array.prototype.slice.call(arguments))))}l.Impl=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._graph=r,Array.isArray(t)?this.nodes=t:this.nodes=[t],this.sources=n}return n(e,[{key:"fetch",value:function(){var e=this;if("NamedNode"!==this.termType||this.sources&&this.sources.indexOf(this.value.split("#")[0])>-1)return Promise.resolve(this);var t=this.value.split("#")[0];return l.rdfFetch(t).then(function(e){return e.graph()}).then(function(r){return l(e.node,r,[t])})}},{key:"each",value:function(e){var t=this,r=this.nodes.map(function(r){return e(l([r],t.graph,t.sources))});return Promise.all(r)}},{key:"fetchEach",value:function(e){var t=this,r=this.nodes.map(function(r){return l([r],t.graph,t.sources).fetch().then(e)});return Promise.all(r)}},{key:"split",value:function(){var e=this;return this.nodes.map(function(t){return l([t],e.graph,e.sources)})}},{key:"out",value:function(e){return l(this.graph.each(this.node,e),this.graph,this.sources)}},{key:"in",value:function(e){return l(this.graph.statementsMatching(void 0,e,this.node).map(function(e){return e.subject}),this.graph,this.sources)}},{key:"graph",get:function(){if(!this._graph)throw Error("Operation not possible as no Graph is available, try fetching first");return this._graph}},{key:"node",get:function(){if(1!==this.nodes.length)throw Error("Operation not possible as this GraphNode is underdetermined");return this.nodes[0]}},{key:"termType",get:function(){return this.node.termType}},{key:"value",get:function(){return this.node.value}}]),e}(),l.rdfFetch=function(e,t,r){var n=this;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.headers||(t.headers=new o),t.headers.get("Accept")||t.headers.set("Accept","text/turtle;q=1, application/n-triples;q=.9, application/rdf+xml;q=.8, application/ld+json;q=.7, */*;q=.1"),i(e,t).then(function(t){return t.ok?(t.graph=function(){return new Promise(function(r,n){var i=a.graph(),o=t.headers.get("Content-type").split(";")[0];return t.text().then(function(t){if("text/html"===o&&"undefined"!=typeof DOMParser){console.log("Working around rdflib problem parsing RDFa in browser");try{s.parseRDFaDOM(a.Util.parseXML(t,{contentType:o}),i,e)}catch(e){return void n(e)}r(i)}else a.parse(t,i,e,o,function(e,t){e?n(e):r(t)})})})},t):t})}(e,t).then(function(a){return a.status<300?a:r&&401===a.status?(console.log("Got 401 response, attempting to login"),r().then(function(){return n.rdfFetch(e,t)})):a})},e.exports=l},function(e,t,r){"use strict";var n=r(0),a=r(5),i=r(2),s=r(1);new Array;function o(e,t){this.rendererGraph=e,this.tbox=t||e,this.env={}}!function(){s.rdf2h;var e=i.Context.prototype.lookup;i.Context.prototype.lookup=function(t){if(this.view instanceof o.Renderee){var r=function(e){var t=function(e){var t=[],r=!1,n=!1,a="";function i(){a.length>0&&(t.push(a),a="")}for(var s=0;s<e.length;s++){var o=e[s];n&&("-"!==o&&(i(),r=!0),a+="<",n=!1),"<"!==o?r&&">"==o?(a+=o,i(),r=!1):r||"/"!=o?a+=o:i():n=!0}return i(),t}(e);return function e(t,r){var a,i="."===(a=r[0])?t:a.endsWith("<-")?t.in(o.resolveCurie(a.substring(0,a.length-2))):a.startsWith("^")?t.in(o.resolveCurie(a.substring(1))):t.out(o.resolveCurie(a));if(1===r.length){var s=i.nodes;if(0===s.length){if(t.nodes[0].language&&o.resolveCurie(r[0]).equals(n.sym("http://purl.org/dc/terms/language")))return[n.literal(t.nodes[0].language)];if(t.nodes[0].datatype&&o.resolveCurie(r[0]).equals(o.resolveCurie("rdf:type")))return[t.nodes[0].datatype]}return s}return e(i,r.slice(1))}(s,t)},i=this.view.rdf2h,s=this.view.graphNode,l=s.graph,u=this.view.context;if(t.startsWith("@prefix ")){var h=(d=t.split(" "))[1],p=d[2],c=h.substring(0,h.length-1),f=p.substring(1,p.length-1);return o.prefixMap[c]=f,""}if(t.startsWith(":render ")){var d,g,v=(d=t.split(" "))[1];(g=d[2])&&(g=o.resolveCurie(g)),g||(g=u);var w=r(v);return w.length>1&&console.warn("Argument of render evaluates to more than one node!"),w.length>0?i.render(l,w[0],g):""}if(t.startsWith(":continue"))return(g=(d=t.split(" "))[1])&&(g=o.resolveCurie(g)),g||(g=u),s.nodes.length>1&&console.warn(":continue invoked in context with more than one node, this shouldn't be possible!"),i.render(l,s.nodes[0],g);if(t.startsWith("+"))return r(t=t.substring(1)).length>0;var m=r(t);return 1===m.length?new o.Renderee(i,a(m[0],l),u):m.map(function(e){return new o.Renderee(i,a(e,l),u)})}return e.call(this,t)}}(),o.Renderee=function(e,t,r){if(!t.nodes)throw new Error("second argument must be a GraphNode");if(1!==t.nodes.length)throw new Error("Renderee must be a single node");this.rdf2h=e,this.graphNode=t,this.context=r},o.Renderee.prototype.toString=function(){return this.graphNode.value?this.graphNode.value:this.graphNode.toString()},o.prototype.getRenderer=function(e){var t=this,r=(s.rdf2h,this.tbox);var o,l=(o=e.graphNode,o.out(s.rdf("type")).nodes.sort(function(e,t){return e.equals(t)?0:e.equals(s.rdfs("Resource"))?1:t.equals(s.rdfs("Resource"))?-1:0===r.match(e,s.rdfs("subClassOf"),t).length?0===r.match(t,s.rdfs("subClassOf"),e).length?e.value.localeCompare(t.value):1:-1}).concat([s.rdfs("Resource")])).map(function(e){return a(e,t.rendererGraph)}),u=function(e,t){return[!1].concat(e).reduce(function(e,r){return e||r.in(s.rdf2h("type")).split().find(function(e){return t.equals(e.out(s.rdf2h("context")).node)})})}(l,e.context);if(!u)throw Error("No renderer found with context: <"+e.context.value+"> for any of the types "+l.map(function(e){return"<"+e.value+">"}).join()+". The resource <"+e.graphNode.value+"> could thus not be rendered.");var h=u.out(s.rdf2h("mustache"));if(h.nodes.length>0)return function(e){return function(t){return i.render(e,t)}}(h.value);var p=u.out(s.rdf2h("javaScript"));return function(e){try{var t="",r=new Function("n","context","$rdf","render","print","GraphNode","env",p.value)(e.graphNode,e.context,n,function(t,r){return e.rdf2h.render(t.graph,t.node,r||e.context)},function(e){t+=e},a,e.rdf2h.env);return r?t+r:t}catch(e){e.message=e.message+" in "+p.value;var i=e.stack.split("\n"),s=i.findIndex(function(e){return e.indexOf("RDF2h.render")>0});throw e.stack=i.splice(0,s-1).join("\n"),e}}},o.prototype.render=function(e,t,r){t.termType||(t=n.sym(t)),r||(r=s.rdf2h("Default"));var i=new o.Renderee(this,a(t,e),r);return this.getRenderer(i)(i)},o.prefixMap={},o.prefixMap.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#",o.prefixMap.rdfs="http://www.w3.org/2000/01/rdf-schema#",o.prefixMap.r2h="http://rdf2h.github.io/2015/rdf2h#",o.prefixMap.schema="http://schema.org/",o.prefixMap.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#",o.prefixMap.dct="http://purl.org/dc/terms/",o.resolveCurie=function(e){if(e.startsWith("<")&&e.endsWith(">"))return n.sym(e.substring(1,e.length-1));var t=e.split(":"),r=t[0],a=t[1];return o.prefixMap[r]?n.sym(o.prefixMap[r]+a):n.sym(e)},"undefined"!=typeof window&&(window.RDF2h=o),e.exports=o}]);
//# sourceMappingURL=rdf2h.js.map